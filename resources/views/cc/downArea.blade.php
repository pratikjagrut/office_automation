@extends('layouts.app')

@section('title', 'Down Area')

@section('content')
   
<div class="container">
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <div class="panel panel-default">
                <div class="panel-heading text-center">
                    <b>Down Area</b>
                </div>
                <div class="panel-body">
                    <form action="/downArea" method="post">
                        {{csrf_field()}}
                        <table class="table table-striped">
                            <tr class="from-group">
                                <td><label>Area Name: </label></td>
                                <td colspan="2"><input id="area" type="text" class="form-control" name="area" required title="Minimum 3 letters required."></td>
                            </tr>
                            <tr class="from-group">
                                <td><label>Down Reason: </label></td>
                                <td colspan="2">
                                    <input id="reason" type="text" class="form-control" name="reason" required>
                                </td>
                            </tr>
                            <tr class="from-group">
                                <td><label>Down Day: </label></td>
                                <td colspan="2">
                                    <input id="down_day_time" type="datetime-local" class="form-control" name="down_day_time" required onblur="downTimeStamp(this.value);">
                                </td>
                            </tr>
                            <tr class="from-group">
                                <td><label>TAT: </label></td>
                                <td>
                                    <input id="tat" type="text" class="form-control" name="tat" required>
                                </td>
                                <td>
                                    <select class="selectpicker form-control" name="format" id="format" title="Select Format" required>
                                        <option value="d">Day/Days</option>
                                        <option value="h">Hour/Hours</option>
                                        <option value="m">Min/Mins</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="from-group">
                                <td><label>Assigned to: </label></td>
                                <td colspan="2">
                                    <input id="assigned_to" type="text" class="form-control" name="assigned_to" required  pattern="([A-Za-z\s]){2,}" title="Only letters are allowed. Minimum 2 letters required.">
                                </td>
                            </tr>
                            <tr class="from-group">
                                <td><label>Generated by: </label></td>
                                <td colspan="2">
                                    <input id="generated_by" type="text" class="form-control" name="generated_by" value="{{Auth::user()->name}}" readonly="true" required>
                                </td>
                            </tr>
                            <tr class="from-group">
                                <td>
                                    <input type="hidden" name="down_timestamp" id="down_timestamp">
                                </td>
                                <td colspan="2">
                                    <button type="reset" name="clear" class="btn btn-danger">Clear!</button>
                                    <button type="submit" name="submit" class="btn btn-primary">Submit</button>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>
        </div>            
    </div>
</div>
<script type="text/javascript">
    function downTimeStamp(t)
    {
      console.log(t)
      var timestamps = new Date(t)
      console.log(timestamps)
      document.getElementById("down_timestamp").value = timestamps.getTime()
    }
</script>
@endsection
